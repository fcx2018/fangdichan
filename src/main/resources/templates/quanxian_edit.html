<!DOCTYPE html>
<html class="x-admin-sm" xmlns:th="http://www.thymeleaf.org">
  
  <head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.2</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="stylesheet" th:href="@{/css/font.css}">
    <link rel="stylesheet" th:href="@{/css/xadmin.css}">
    <script type="text/javascript" th:src="@{/lib/layui/layui.js}" charset="utf-8"></script>
    <script type="text/javascript" th:src="@{/js/xadmin.js}"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="layui-fluid">
        <div class="layui-row">
            <form  id="form" class="layui-form layui-form-pane">
                <div class="layui-form-item">
                    <label for="name" class="layui-form-label">
                        <span class="x-red">*</span>角色名
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" id="name" th:value="${quanxian.name}" name="name" required="" lay-verify="required"
                        autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">
                        拥有权限
                    </label>
                    <table  class="layui-table layui-input-block">
                        <tbody>
                            <tr>
                                <td>
                                    <input type="checkbox" name="like1[write]" lay-skin="primary" lay-filter="father" title="管理员管理">
                                </td>
                                <td>
                                    <div class="layui-input-block">
                                        <input name="quanxian" th:checked="${qxmap['glylb'] != null && qxmap['glylb'] != ''}" lay-skin="primary" type="checkbox" value="glylb" title="管理员列表">
                                        <input name="quanxian" th:checked="${qxmap['glytj'] != null && qxmap['glytj'] != ''}" lay-skin="primary" type="checkbox" value="glytj" title="管理员添加">
                                        <input name="quanxian" th:checked="${qxmap['glysc'] != null && qxmap['glysc'] != ''}" lay-skin="primary" type="checkbox" value="glysc" title="管理员删除">
                                        <input name="quanxian" th:checked="${qxmap['glyxg'] != null && qxmap['glyxg'] != ''}" lay-skin="primary" type="checkbox" value="glyxg" title="管理员修改">
                                        <input name="quanxian" th:checked="${qxmap['jslb'] != null && qxmap['jslb'] != ''}" lay-skin="primary" type="checkbox" value="jslb" title="角色列表">
                                        <input name="quanxian" th:checked="${qxmap['jstj'] != null && qxmap['jstj'] != ''}" lay-skin="primary" type="checkbox" value="jstj" title="角色添加">
                                        <input name="quanxian" th:checked="${qxmap['jssc'] != null && qxmap['jssc'] != ''}" lay-skin="primary" type="checkbox" value="jssc" title="角色删除">
                                        <input name="quanxian" th:checked="${qxmap['jsxg'] != null && qxmap['jsxg'] != ''}" lay-skin="primary" type="checkbox" value="jsxg" title="角色修改">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="like1[write]" lay-skin="primary" lay-filter="father" title="用户管理">
                                </td>
                                <td>
                                    <div class="layui-input-block">
                                        <input name="quanxian" th:checked="${qxmap['yhlb'] != null && qxmap['yhlb'] != ''}" lay-skin="primary" type="checkbox" value="yhlb" title="用户列表">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="like1[write]" lay-skin="primary" lay-filter="father" title="新闻管理">
                                </td>
                                <td>
                                    <div class="layui-input-block">
                                        <input name="quanxian" th:checked="${qxmap['xwlb'] != null && qxmap['xwlb'] != ''}" lay-skin="primary" type="checkbox" value="xwlb" title="新闻列表">
                                        <input name="quanxian" th:checked="${qxmap['xwtj'] != null && qxmap['xwtj'] != ''}" lay-skin="primary" type="checkbox" value="xwtj" title="新闻添加">
                                        <input name="quanxian" th:checked="${qxmap['xwxg'] != null && qxmap['xwxg'] != ''}" lay-skin="primary" type="checkbox" value="xwxg" title="新闻修改">
                                        <input name="quanxian" th:checked="${qxmap['xwsc'] != null && qxmap['xwsc'] != ''}" lay-skin="primary" type="checkbox" value="xwsc" title="新闻删除">
                                        <input name="quanxian" th:checked="${qxmap['xwzt'] != null && qxmap['xwzt'] != ''}" lay-skin="primary" type="checkbox" value="xwzt" title="新闻状态">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="like1[write]" lay-skin="primary" lay-filter="father" title="楼盘管理">
                                </td>
                                <td>
                                    <div class="layui-input-block">
                                        <input name="quanxian" th:checked="${qxmap['lplb'] != null && qxmap['lplb'] != ''}" lay-skin="primary" type="checkbox" value="lplb" title="楼盘列表">
                                        <input name="quanxian" th:checked="${qxmap['lptj'] != null && qxmap['lptj'] != ''}" lay-skin="primary" type="checkbox" value="lptj" title="楼盘添加">
                                        <input name="quanxian" th:checked="${qxmap['lpsh'] != null && qxmap['lpsh'] != ''}" lay-skin="primary" type="checkbox" value="lpsh" title="楼盘审核">
                                        <input name="quanxian" th:checked="${qxmap['lpxg'] != null && qxmap['lpxg'] != ''}" lay-skin="primary" type="checkbox" value="lpxg" title="楼盘修改">
                                        <input name="quanxian" th:checked="${qxmap['lpsc'] != null && qxmap['lpsc'] != ''}" lay-skin="primary" type="checkbox" value="lpsc" title="楼盘删除">
                                        <input name="quanxian" th:checked="${qxmap['lpjplb'] != null && qxmap['lpjplb'] != ''}" lay-skin="primary" type="checkbox" value="lpjplb" title="楼盘奖品列表">
                                        <input name="quanxian" th:checked="${qxmap['lpjptj'] != null && qxmap['lpjptj'] != ''}" lay-skin="primary" type="checkbox" value="lpjptj" title="楼盘奖品添加">
                                        <input name="quanxian" th:checked="${qxmap['lpjpxg'] != null && qxmap['lpjpxg'] != ''}" lay-skin="primary" type="checkbox" value="lpjpxg" title="楼盘奖品修改">
                                        <input name="quanxian" th:checked="${qxmap['lpjpsc'] != null && qxmap['lpjpsc'] != ''}" lay-skin="primary" type="checkbox" value="lpjpsc" title="楼盘奖品删除">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="like1[write]" lay-skin="primary" lay-filter="father" title="提现管理">
                                </td>
                                <td>
                                    <div class="layui-input-block">
                                        <input name="quanxian" th:checked="${qxmap['txlb'] != null && qxmap['txlb'] != ''}" lay-skin="primary" type="checkbox" value="txlb" title="提现列表">
                                        <input name="quanxian" th:checked="${qxmap['txsh'] != null && qxmap['txsh'] != ''}" lay-skin="primary" type="checkbox" value="txsh" title="提现审核">
                                        <input name="quanxian" th:checked="${qxmap['txdk'] != null && qxmap['txdk'] != ''}" lay-skin="primary" type="checkbox" value="txdk" title="提现打款">
                                        <input name="quanxian" th:checked="${qxmap['txsc'] != null && qxmap['txsc'] != ''}" lay-skin="primary" type="checkbox" value="txsc" title="提现删除">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="like1[write]" lay-skin="primary" lay-filter="father" title="明细管理">
                                </td>
                                <td>
                                    <div class="layui-input-block">
                                        <input name="quanxian" th:checked="${qxmap['mxlb'] != null && qxmap['mxlb'] != ''}" lay-skin="primary" type="checkbox" value="mxlb" title="分享明细列表">
                                        <input name="quanxian" th:checked="${qxmap['zjmxlb'] != null && qxmap['zjmxlb'] != ''}" lay-skin="primary" type="checkbox" value="zjmxlb" title="资金明细列表">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="like1[write]" lay-skin="primary" lay-filter="father" title="系统设置">
                                </td>
                                <td>
                                    <div class="layui-input-block">
                                        <input name="quanxian" th:checked="${qxmap['xtcslb'] != null && qxmap['xtcslb'] != ''}" lay-skin="primary" type="checkbox" value="xtcslb" title="系统参数列表">
                                        <input name="quanxian" th:checked="${qxmap['xtcsxg'] != null && qxmap['xtcsxg'] != ''}" lay-skin="primary" type="checkbox" value="xtcsxg" title="系统参数修改">
                                        <input name="quanxian" th:checked="${qxmap['xtcssc'] != null && qxmap['xtcssc'] != ''}" lay-skin="primary" type="checkbox" value="xtcssc" title="系统参数删除">
                                        <input name="quanxian" th:checked="${qxmap['xtcstj'] != null && qxmap['xtcstj'] != ''}" lay-skin="primary" type="checkbox" value="xtcstj" title="系统参数添加">
                                        <input name="quanxian" th:checked="${qxmap['qylb'] != null && qxmap['qylb'] != ''}" lay-skin="primary" type="checkbox" value="qylb" title="区域列表">
                                        <input name="quanxian" th:checked="${qxmap['qytj'] != null && qxmap['qytj'] != ''}" lay-skin="primary" type="checkbox" value="qytj" title="区域添加">
                                        <input name="quanxian" th:checked="${qxmap['qyxg'] != null && qxmap['qyxg'] != ''}" lay-skin="primary" type="checkbox" value="qyxg" title="区域修改">
                                        <input name="quanxian" th:checked="${qxmap['qysc'] != null && qxmap['qysc'] != ''}" lay-skin="primary" type="checkbox" value="qysc" title="区域删除">
                                        <input name="quanxian" th:checked="${qxmap['yhlb'] != null && qxmap['yhlb'] != ''}" lay-skin="primary" type="checkbox" value="yhlb" title="银行列表">
                                        <input name="quanxian" th:checked="${qxmap['yhxg'] != null && qxmap['yhxg'] != ''}" lay-skin="primary" type="checkbox" value="yhxg" title="银行修改">
                                        <input name="quanxian" th:checked="${qxmap['yhtj'] != null && qxmap['yhtj'] != ''}" lay-skin="primary" type="checkbox" value="yhtj" title="银行添加">
                                        <input name="quanxian" th:checked="${qxmap['yhsc'] != null && qxmap['yhsc'] != ''}" lay-skin="primary" type="checkbox" value="yhsc" title="银行删除">
                                        <input name="quanxian" th:checked="${qxmap['fllb'] != null && qxmap['fllb'] != ''}" lay-skin="primary" type="checkbox" value="fllb" title="分类列表">
                                        <input name="quanxian" th:checked="${qxmap['flxg'] != null && qxmap['flxg'] != ''}" lay-skin="primary" type="checkbox" value="flxg" title="分类修改">
                                        <input name="quanxian" th:checked="${qxmap['fltj'] != null && qxmap['fltj'] != ''}" lay-skin="primary" type="checkbox" value="fltj" title="分类添加">
                                        <input name="quanxian" th:checked="${qxmap['flsc'] != null && qxmap['flsc'] != ''}" lay-skin="primary" type="checkbox" value="flsc" title="分类删除">
                                        <input name="quanxian" th:checked="${qxmap['blb'] != null && qxmap['blb'] != ''}" lay-skin="primary" type="checkbox" value="blb" title="banner列表">
                                        <input name="quanxian" th:checked="${qxmap['bxg'] != null && qxmap['bxg'] != ''}" lay-skin="primary" type="checkbox" value="bxg" title="banner修改">
                                        <input name="quanxian" th:checked="${qxmap['btj'] != null && qxmap['btj'] != ''}" lay-skin="primary" type="checkbox" value="btj" title="banner添加">
                                        <input name="quanxian" th:checked="${qxmap['bsc'] != null && qxmap['bsc'] != ''}" lay-skin="primary" type="checkbox" value="bsc" title="banner删除">
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="layui-form-item layui-form-text">
                    <label for="desc" class="layui-form-label">
                        描述
                    </label>
                    <div class="layui-input-block">
                        <textarea placeholder="请输入内容" id="desc" th:text="${quanxian.miaoshu}" name="miaoshu" class="layui-textarea"></textarea>
                    </div>
                </div>
                <div class="layui-form-item">
                    <input  type="hidden" name="id" th:value="${quanxian.id}">
                <button class="layui-btn" lay-submit="" lay-filter="add">提交</button>
              </div>
            </form>
        </div>
    </div>
    <script>
        layui.use(['form','layer'], function(){
            $ = layui.jquery;
          var form = layui.form
          ,layer = layui.layer;
        
          //监听提交
          form.on('submit(add)', function(data){
            console.log(data);
            $.post({
                url:"updateqx",
                data:$("#form").serialize(),
                dataType:"json",
                success:function(res){
                    layer.msg(res.msg, {
                        time: 1000
                    }, function() {
                        if (res.success == "true") {
                            if(res.reload == "true"){
                                parent.parent.location.reload();
                            }else{
                                //关闭当前frame
                                 xadmin.close();
                                // 可以对父窗口进行刷新
                                xadmin.father_reload();
                            }
                        }
                    })
                }
            })
            return false;
          });


        form.on('checkbox(father)', function(data){

            if(data.elem.checked){
                $(data.elem).parent().siblings('td').find('input').prop("checked", true);
                form.render(); 
            }else{
               $(data.elem).parent().siblings('td').find('input').prop("checked", false);
                form.render();  
            }
        });

        });
    </script>
  </body>
</html>